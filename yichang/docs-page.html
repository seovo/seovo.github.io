<!DOCTYPE html>
<html lang="en"> 
<head>
    <title>Documentación Sistema de Recomendación Yichang</title>
    
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Bootstrap 4 Template For Software Startups">
    <meta name="author" content="Xiaoying Riley at 3rd Wave Media">    
    <link rel="shortcut icon" href="favicon.ico"> 
    
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
    
    <!-- FontAwesome JS-->
    <script defer src="assets/fontawesome/js/all.min.js"></script>
    
    <!-- Plugins CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="assets/plugins/simplelightbox/simple-lightbox.min.css">

    <!-- Theme CSS -->  
    <link id="theme-style" rel="stylesheet" href="assets/css/theme.css">

</head> 

<body class="docs-page">    
    <header class="header fixed-top">	    
        <div class="branding docs-branding">
            <div class="container-fluid position-relative py-2">
                <div class="docs-logo-wrapper">
					<button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible me-2 d-xl-none" type="button">
	                    <span></span>
	                    <span></span>
	                    <span></span>
	                </button>
	                <div class="site-logo"><a class="navbar-brand" href="index.html"><img class="logo-icon me-2" src="assets/images/coderdocs-logo.svg" alt="logo"><span class="logo-text">Coder<span class="text-alt">Docs</span></span></a></div>    
                </div><!--//docs-logo-wrapper-->
	            
            </div><!--//container-->
        </div><!--//branding-->
    </header><!--//header-->
    
    
    <div class="docs-wrapper">
	    <div id="docs-sidebar" class="docs-sidebar">
		    <div class="top-search-box d-lg-none p-3">
                <form class="search-form">
		            <input type="text" placeholder="Search the docs..." name="search" class="form-control search-input">
		            <button type="submit" class="btn search-btn" value="Search"><i class="fas fa-search"></i></button>
		        </form>
            </div>
		    <nav id="docs-nav" class="docs-nav navbar">
			    <ul class="section-items list-unstyled nav flex-column pb-3">
				    <li class="nav-item section-title"><a class="nav-link scrollto active" href="#section-1"><span class="theme-icon-holder me-2"><i class="fas fa-map-signs"></i></span>Introduction</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-1">Sistema Colaborativo</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-2">Regresion x redes neuronales</a></li>
				    <!--
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-3">Section Item 1.3</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-4">Section Item 1.4</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-5">Section Item 1.5</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-1-6">Section Item 1.6</a></li>
				-->
				    <li class="nav-item section-title mt-3">
				    	<a class="nav-link scrollto" href="#section-2">
				    		<span class="theme-icon-holder me-2"><i class="fas fa-arrow-down"></i></span>Sistema Colaborativo</a>
				    </li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-1">Data a usarse</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-2">Actualizacion de la Informacion</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-3">Promediar la Informacion</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-4">Coeficiente de Person</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-5">Calculos de recomendacion</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-2-6">Imprimir las recomendaciones</a></li>


				    <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-3"><span class="theme-icon-holder me-2"><i class="fas fa-box"></i></span>Regresion</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-1">cargar la Informacion</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-2">Diseño de la Red Neuronal</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-3">Entrenamiento</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-3-4">Prediccion</a></li>
				    
				    <li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#section-9"><span class="theme-icon-holder me-2"><i class="fas fa-lightbulb"></i></span>Ingresar al Servidor</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-9-1">Ingresar a la VPN</a></li>
				    <li class="nav-item"><a class="nav-link scrollto" href="#item-9-2">Procesos en Segundo Plano</a></li>
				    
			    </ul>

		    </nav><!--//docs-nav-->
	    </div><!--//docs-sidebar-->
	    <div class="docs-content">
		    <div class="container">
			    <article class="docs-article" id="section-1">
				    <header class="docs-header">
					    <h1 class="docs-heading">Sistema de recomendación de Productos </h1>
					    <section class="docs-intro">
						    <p>la empresa yichang maneja diversos productos que distribuyen a las bodegas a traves de sus vendedores, estos vendedores usan una app para realizar la venta.</p>
						    <p>aqui (en la app) es donde se  crea el sistema de recomendaciones en base a la información historica de los clientes </p>
						</section><!--//docs-intro-->
						<img src="img/bodegapp.jpg" class="img-fluid" alt="Responsive image">
						
						
				    </header>
				    <section class="docs-section" id="item-1-1">
						<h2 class="section-heading">Sistema Colaborativo</h2>
						<p>la recomendación por el sistema colaborativo se basa en buscar usuarios similares a el usuario al que se busca recomendar.</p>

						<p>y luego recomendar los productos de los otros usuarios que el usuario actual no ah considerado.</p>
						<p>un ejemplo es youtube que cuando tu ves un video su algoritmo te recomienda otros videos que otros usuarios  han visto en base a tus preferencias.</p>
						<p>para este caso  usaremos la cantidad comprada para poder determinar la similitud entre usuarios.</p>
						<img src="img/colaborativo1.png" class="img-fluid" alt="Responsive image">

						
						
						
                       
         
                        
                       
					</section><!--//section-->
					
					<section class="docs-section" id="item-1-2">
						<h2 class="section-heading">Regresion x redes neuronales</h2>
						<p>Usaremos el historial de ventas x predecir la cantidad que se comprara x cada producto , al final listaremos los productos que retornen una mayor cantidad de compra.</p>
						
						
						<img src="img/neuronal.png" class="img-fluid" alt="Responsive image">
						
						<h5>Custom Table:</h5>
						<div class="table-responsive my-4">
							<table class="table table-bordered">
								<tbody>
								    <tr>
									    <th class="theme-bg-light"><a class="theme-link" href="#">CANAL</a></th>
									    <td>Variable de entrada del tipo de canal (minorista , mayorista , etc)</td>
									</tr>
									<tr>
									      <th class="theme-bg-light"><a class="theme-link" href="#">Mes</a></th>
									      <td>Variable de entrada  , El numero del mes </td>
									</tr>
									
									<tr>
									    <th class="theme-bg-light"><a class="theme-link" href="#">Zonas</a></th>
									    <td>Variable de entrada  del area de venta</td>
									</tr>
									
									<tr>
									    <th class="theme-bg-light"><a class="theme-link" href="#">Cantidad</a></th>
									    <td>Variable de salida , seria el dato a predecir x el modelo</td>
									</tr>
								</tbody>
							</table>
						</div><!--//table-responsive-->
										
					</section><!--//section-->
					
					
			    </article>
			    
			    <article class="docs-article" id="section-2">
				    <header class="docs-header">
					    <h1 class="docs-heading">Sistema Colaborativo</h1>
					    <section class="docs-intro">
						    <p>para el algoritmo de recomendación colaborativa se usara la información de las ventas , usando la cantidad comprada como medida para calcular la similitud.</p>
						</section><!--//docs-intro-->
				    </header>
				     <section class="docs-section" id="item-2-1">
						<h2 class="section-heading">Data a usarse</h2>
						<p>para el sistema colaborativo se debe usar la información actual , para lo cual debemos definir el intervalo de tiempo a usarse , desde la fecha actual , hasta n dias atraz. </p>
					</section><!--//section-->
					
					<section class="docs-section" id="item-2-2">
						<h2 class="section-heading">Actualizacion de la informacion</h2>
						<p>ingresar al archivo update_data.py</p>
						
						<img src="img/ruta_update_date.png" class="img-fluid" alt="Responsive image">
						<p>este archivo se encuentra configurado en el crontab para ejecutarse todos los dias y actualizar la ultima informacion</p>
						<p>en la linea 114 (puede variar si se mueve el codigo) , en la variable days se define 60 dias (2 meses) </p>
						<img src="img/days_colaborative.png" class="img-fluid" alt="Responsive image">
					</section><!--//section-->
					
					<section class="docs-section" id="item-2-3">
						<h2 class="section-heading">Promediar la Informacion</h2>
						<p>La que vamos ah observar es que vamos a tener  informacion repetida por ejemplo de un mismo cliente al largo del mes puede tener compras del mismo producto lo que se realiza es un promedio para tener informacion unica por cliente y producto.</p>
						<img src="img/promedio_colab.png" class="img-fluid" alt="Responsive image">

						<p>En codigo esta informacion promediada se guarda en "mean_pedidos_mes.joblib" para luego ser usado</p>
						<img src="img/mean_pedidos_colab.png" class="img-fluid" alt="Responsive image">
						


					</section><!--//section-->

					<section class="docs-section" id="item-2-4">
						<h2 class="section-heading">Coeficiente de Person</h2>
						<img src="img/person.png" class="img-fluid" alt="Responsive image">
						
						<p>se usara el coeficiente de person para calcular la similitud entre los usuarios, por lo cual habra comparar la cantidad comprada, es por ello que se realizara un agrupamiento x cliente y se compara los productos similares</p>
					
						<img src="img/person_code.png" class="img-fluid" alt="Responsive image">

						<p>al final de realizar estos calculos obtendremos una array con el coeficiente person por cliente</p>
						<img src="img/person_customer.png" class="img-fluid" alt="Responsive image">

						
						
						
					</section><!--//section-->

					<section class="docs-section" id="item-2-5">
						<h2 class="section-heading">Calculos de recomendacion</h2>
						<p>lo que sigue es realizar calculos matriciales para recomendar otros productos , comenzando con obtener los 50 usuarios que tengan el coeficeinte person lo mas cercano a uno.</p>
						<img src="img/listop_person.png" class="img-fluid" alt="Responsive image">
						<p>luego de estos clientes se busca sus productos y se multiplica el coeficiente * la cantidad</p>
						<img src="img/cal_colab1.png" class="img-fluid" alt="Responsive image">
						<p>luego hay que sumar los indices  x producto y realizar el promedio</p>
						<img src="img/cal_colab2.png" class="img-fluid" alt="Responsive image">
						<p>de aqui sacamos los mas puntuados</p>

						
					</section><!--//section-->

					<section class="docs-section" id="item-2-6">
						<h2 class="section-heading">Imprimir las Recomendaciones</h2>
						<p>Finalmente ya la lsita de los productos mas puntuados solo tendria que imprimirse en pantalla los nombre de los productos , es lo que se reflejado en el api como una lista de nombre de productos</p>
						<img src="img/lista_productos.jpeg" class="img-fluid" alt="Responsive image">
						
					</section><!--//section-->
			    </article><!--//docs-article-->
			    
			    
			    <article class="docs-article" id="section-3">
				    <header class="docs-header">
					    <h1 class="docs-heading">Regresion</h1>
					    <section class="docs-intro">
						    <p>Se busca predecir la cantidad a comprar por cada producto.</p>
						</section><!--//docs-intro-->
				    </header>
				     <section class="docs-section" id="item-3-1">
						<h2 class="section-heading">Cargar la Informacion</h2>
						<p>Se carga toda la informacion necesaria de las ventas.</p>
						<img src="img/load_data.png" class="img-fluid" alt="Responsive image">
						<p>cargar lo label encoders del canal , fecha , canal (los labelsencoders son codificadores qeu convierten texto a una representacion numerica)</p>
						<img src="img/label_encoder_load.png" class="img-fluid" alt="Responsive image">
						
					</section><!--//section-->
					
					<section class="docs-section" id="item-3-2">
						<h2 class="section-heading">Diseño de la Red Neuronal</h2>
						<p>Se realiza un modelo por cada producto que cumpla las metricas por lo cual se realiza un bucle para cada producto</p>
						<img src="img/for_regre.png" class="img-fluid" alt="Responsive image">
						<p>se filtra la informacion por cada producto y se separa en variables de entrada y de salida , adicional hay un condicional para validar que si hay menosde 150 registros x mes ya no considerarlo . </p>
						<img src="img/filtro_regre.png" class="img-fluid" alt="Responsive image">
						<p>luego se procede a convertir a numeros las varibles de canal , fecha y zona con los encoders y luego convertirlo a variables dummy</p>
						<img src="img/regre_transform.png" class="img-fluid" alt="Responsive image">
						<p>luego se procede ah realizar el diseño  de la red neuronal con dos capas </p>
						<img src="img/red_neuronal.png" class="img-fluid" alt="Responsive image">
						
						


						
						
						
					</section><!--//section-->
					

					
					<section class="docs-section" id="item-3-3">
						<h2 class="section-heading">Entrenamiento</h2>
						<p>una ves ejecutado el modelo solo se guardara si cumple con las metricas minimas del MAE(valor absoluto medio) y MSLE (Root Mean Squared Logarithmic Error,
						ambos miden la diferencia entre valor predicho y valor real , solo que el ultimo es usado para cuando los vlores de entrada son muy distantes por lo cual usa logatitmos (son fomrmulas estadisticas) ,  mientras mas cerca cero mejor   </p>
						<img src="img/metricas.png" class="img-fluid" alt="Responsive image">

						<p>En el servidor para realizar el entrenamiento  de los modelos debe eliminar los archivos de la carpeta pkl_generated</p>
						<p>luego ingresar a la sesion :  tmux attach -t regre</p>
						<p>debe asegurarse que este en la ruta:  /home/gwyadmin/svr_integ_artificial/recommendation_IA/generator</p>
						<p>y ejecutar : python3 regresion.py & </p>
						<p>Este proceso demora entre 1 o 2 dias max</p>
						<p>puede cerrar la session del tmux con :  tmux detach</p>
						<img src="img/modelos.png" class="img-fluid" alt="Responsive image">
						
					</section><!--//section-->
					<section class="docs-section" id="item-3-4">
						<h2 class="section-heading">Prediccion</h2>
						<p>En el api se hace la prediccion con los modelos entrenados pero solo x cada cliente se recorre los productos que alguna ves  compro , ya que no tendria sentido predecir algun producto que nunca ah comprado (para eso esta el algoritmo colaborativo)</p>
						<img src="img/prediccion.png" class="img-fluid" alt="Responsive image">
						<p>se lista los que generaron una mayor cantidad en la prediccion de la cantidad</p>
						
					</section><!--//section-->
			    </article><!--//docs-article-->
			    
			   

			    
			    <article class="docs-article" id="section-9">
				    <header class="docs-header">
					    <h1 class="docs-heading">Ingresar al servidor</h1>
					    <section class="docs-intro">
						    <p>pasos para ingresar al servidor</p>
						</section><!--//docs-intro-->
				    </header>
				     <section class="docs-section" id="item-9-1">
						<h2 class="section-heading">Ingresar a la VPN</h2>
						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>Logearse en WatchGuard</h5>
						<img src="img/vpn.png" class="img-fluid" alt="Responsive image">
						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>Ingresar con Putty</h5>
						<img src="img/putty.png" class="img-fluid" alt="Responsive image">
						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>Ingresar a la carpeta raiz</h5>
						<p>cd  /home/gwyadmin/svr_integ_artificial/recommendation_IA  </p>
						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>ACTIVAR PYTHON VERSION 3.10</h5>
						<p>conda activate python310</p>

						
						
					</section><!--//section-->
					
					<section class="docs-section" id="item-9-2">
						<h2 class="section-heading">Procesos en Segundo Plano</small></h2>
						
						<p>PARA LOS PROCESOS EN SEGUNDO PLANO USAREMOS TMUX</p>
						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>Listar ventanas activas</h5>
						<p>tmux ls</p>
						<img src="img/tmuxls.png" class="img-fluid" alt="Responsive image">


						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>tmux attach -t yichang</h5>
						<p>Esta comando lo que hace es ingresar a la sesion donde se ejecutando el api del webservices</p>
						<img src="img/tmuxyichang.jpeg" class="img-fluid" alt="Responsive image">
						<p>si desea detener el proceso de flask debe buscar el numero del proceso con ps</p>
						<p>volver a levantar el servicio con :  flask --app app run  --debugger --host=0.0.0.0 &</p>
						<p>asegurarse estar en la ruta cd  /home/gwyadmin/svr_integ_artificial/recommendation_IA , para ejecutar el comnado anterior</p>

						<p>para salir de la sesion con el comando:  tmux detach</p>


						<h5 class="pt-3"><i class="fas fa-question-circle me-1"></i>tmux attach -t regre</h5>
						<p>Esta comando lo que hace es ingresar a la sesion donde ejecutaras la actualizacion de los modelos de regresion</p>
						<p>para salir de la sesion con el comando:  tmux detach</p>
						


						
					</section><!--//section-->
					
					
			    </article><!--//docs-article-->

			    
		    </div> 
	    </div>
    </div><!--//docs-wrapper-->
   
       
    <!-- Javascript -->          
    <script src="assets/plugins/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>  
    
    
    <!-- Page Specific JS -->
    <script src="assets/plugins/smoothscroll.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
    <script src="assets/js/highlight-custom.js"></script> 
    <script src="assets/plugins/simplelightbox/simple-lightbox.min.js"></script>      
    <script src="assets/plugins/gumshoe/gumshoe.polyfills.min.js"></script> 
    <script src="assets/js/docs.js"></script> 

</body>
</html> 

